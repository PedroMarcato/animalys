<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template/Layout.xhtml">

    <ui:define name="content">
        <h1 class="aw-page-title">Animais do Proprietário</h1>

        <h:form>
            <p:dataTable var="animal" value="#{historicoAnimalClienteBean.animais}"
                emptyMessage="Nenhum animal encontrado.">
                <p:column headerText="Nome do Animal">
                    #{animal.nome}
                </p:column>
                <p:column headerText="Especie">
                    #{animal.raca.especie.nome}
                </p:column>
                <p:column headerText="Raça">
                    #{animal.raca.nome}
                </p:column>
                <p:column headerText="Sexo">
                    #{animal.sexo}
                </p:column>
                <p:column headerText="Ações" style="width: 108px;">
                    <h:link outcome="/relatorios/historicoAnimal.xhtml"
                        title="Visualizar Ficha do Animal"
                        styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left"
                        style="padding: .3em;">
                        <f:param name="animalId" value="#{animal.idAnimal}" />
                        <i style="margin: 0 5px;" class="fa fa-eye"></i>
                    </h:link>
                    <h:link styleClass="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left"
                    title="Editar Animal"
                        style="padding: .3em;">
                        <f:param name="animalId" value="#{animal.idAnimal}" />
                        <i style="margin: 0 5px;" class="fa fa-pencil"></i>
                    </h:link>

                    <p:commandLink class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left"
                        title="Visualizar Imagem do Animal"
                        onclick="PF('imagemDialog').show();"
                        action="#{pesquisaSolicitacoesBean.selecionarImagem(animal.foto)}" process="@this"
                        update="imagemDialogContent" style="padding: .3em;">
                        <i style="margin: 0 5px;" class="fa fa-picture-o"></i>
                    </p:commandLink>
                </p:column>
            </p:dataTable>
        </h:form>

        <p:dialog header="Visualização da Imagem" widgetVar="imagemDialog" hideEffect="fade" showEffect="fade"
            id="imagemDialog" style="max-width: 700px; min-height: 400px;" modal="true" resizable="true">

            <h:panelGroup id="imagemDialogContent">
                <div style="text-align: center;">
                    <img src="/uploads/#{not empty pesquisaSolicitacoesBean.imagemSelecionada ? pesquisaSolicitacoesBean.imagemSelecionada : 'no_image.jpg'}"
                        style="max-width: 100%; max-height: 500px;" alt="Imagem ampliada" />
                </div>
            </h:panelGroup>

        </p:dialog>

    </ui:define>
</ui:composition>